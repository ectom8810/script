-- ç„ä¸›è…³æœ¬ - çµ‚æ¥µç°¡åŒ–ç‰ˆ + é›ªèŠ±å‹•ç•«
print("ğŸ® =================================")
print("ğŸ® ç„ä¸›è…³æœ¬ - çµ‚æ¥µç°¡åŒ–ç‰ˆ + é›ªèŠ±")
print("ğŸ® åŒ…å«ï¼šå¿«é€Ÿæ”»æ“Š + çš®è…³æœ¬ + é›ªèŠ±å‹•ç•«")
print("ğŸ® =================================")

-- ç¢ºä¿éŠæˆ²å®Œå…¨åŠ è¼‰
repeat task.wait() until game:IsLoaded()

-- ç²å–ç©å®¶
local player = game.Players.LocalPlayer
if not player then
    warn("âŒ ç„¡æ³•ç²å–ç©å®¶")
    return
end

-- ç­‰å¾…PlayerGui
task.wait(2)
local playerGui = player:WaitForChild("PlayerGui", 5)
if not playerGui then
    warn("âŒ ç„¡æ³•æ‰¾åˆ°PlayerGuiï¼Œå˜—è©¦ä½¿ç”¨CoreGui")
    playerGui = game:GetService("CoreGui")
end

print("âœ… ä½¿ç”¨UIå®¹å™¨: " .. playerGui.Name)

-- æ¸…ç†èˆŠçš„UI
if playerGui:FindFirstChild("XuanCongScript_Snow") then
    playerGui.XuanCongScript_Snow:Destroy()
    print("ğŸ—‘ï¸ æ¸…ç†äº†èˆŠçš„UI")
end

-- ========================
-- å…¨å±€è®Šé‡
-- ========================
local tweenService = game:GetService("TweenService")
local inputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")

-- åŠŸèƒ½ç‹€æ…‹è®Šé‡
_G.XuanCongUILoaded = true
local isFastAttackOn = false
local isPiScriptOn = false

-- åŠŸèƒ½ç³»çµ±
local fastAttackSystem = nil

-- ========================
-- å‰µå»ºScreenGui
-- ========================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "XuanCongScript_Snow"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.DisplayOrder = 999
screenGui.IgnoreGuiInset = true

_G.XuanCongUIInstance = screenGui

print("âœ… ScreenGuiå·²å‰µå»º")

-- ========================
-- å‰µå»ºä¸»æ¡†æ¶
-- ========================
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 260, 0, 180)
mainFrame.Position = UDim2.new(0.5, -130, 0.5, -90)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 35, 50)  -- æ”¹ç‚ºå†¬æ—¥è—è‰²èª¿
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0
mainFrame.Visible = true
mainFrame.ClipsDescendants = true  -- è®“é›ªèŠ±ä¸æœƒè¶…å‡ºé‚Šç•Œ
mainFrame.Parent = screenGui

-- åœ“è§’
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 10)
uiCorner.Parent = mainFrame

-- é‚Šæ¡†å’Œé™°å½±æ•ˆæœ
local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(100, 150, 200)  -- å†°è—è‰²é‚Šæ¡†
uiStroke.Thickness = 2
uiStroke.Parent = mainFrame

-- èƒŒæ™¯æ¼¸è®Š (å†¬æ—¥ä¸»é¡Œ)
local bgGradient = Instance.new("UIGradient")
bgGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 40, 60)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(35, 45, 70)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 35, 55))
})
bgGradient.Rotation = 45
bgGradient.Parent = mainFrame

print("âœ… ä¸»æ¡†æ¶å·²å‰µå»º")

-- ========================
-- é›ªèŠ±é£„è½ç³»çµ±
-- ========================
print("â„ï¸ åˆå§‹åŒ–é›ªèŠ±ç³»çµ±...")

local snowflakes = {}
local snowTypes = {
    {symbol = "â„ï¸", size = 18, speed = 25, sway = 0.2, spin = 1.5},
    {symbol = "â„ï¸", size = 16, speed = 30, sway = 0.3, spin = 2},
    {symbol = "ï¼Š", size = 14, speed = 35, sway = 0.4, spin = -1.8},
    {symbol = "âœ±", size = 12, speed = 40, sway = 0.5, spin = 2.5}
}

-- å‰µå»ºåˆå§‹é›ªèŠ±
for i = 1, 12 do
    local snowType = snowTypes[math.random(1, #snowTypes)]
    
    local snowflake = Instance.new("TextLabel")
    snowflake.Name = "Snowflake_" .. i
    snowflake.Size = UDim2.new(0, snowType.size, 0, snowType.size)
    
    -- éš¨æ©Ÿèµ·å§‹ä½ç½® (å¾é ‚éƒ¨é–‹å§‹)
    local startX = math.random(-20, 240)
    local startY = math.random(-30, -10)
    
    snowflake.Position = UDim2.new(0, startX, 0, startY)
    snowflake.BackgroundTransparency = 1
    snowflake.Text = snowType.symbol
    snowflake.TextColor3 = Color3.fromRGB(180, 220, 255)
    snowflake.Font = Enum.Font.SourceSansBold
    snowflake.TextSize = snowType.size - 4
    snowflake.ZIndex = 0
    snowflake.Parent = mainFrame
    
    table.insert(snowflakes, {
        object = snowflake,
        speed = snowType.speed * (0.8 + math.random() * 0.4),
        sway = snowType.sway * (0.5 + math.random() * 1),
        spinSpeed = snowType.spin * (0.5 + math.random()),
        swayOffset = math.random() * math.pi * 2,
        floatPhase = math.random() * math.pi * 2,
        transparency = 0.4 + math.random() * 0.4
    })
end

-- é›ªèŠ±å‹•ç•«é€£æ¥
local snowAnimation
snowAnimation = runService.Heartbeat:Connect(function(deltaTime)
    local time = tick()
    
    for i, snowData in ipairs(snowflakes) do
        if snowData.object and snowData.object.Parent then
            local flake = snowData.object
            
            -- ç•¶å‰ä½ç½®
            local currentX = flake.Position.X.Offset
            local currentY = flake.Position.Y.Offset
            
            -- ä¸‹è½
            local newY = currentY + snowData.speed * deltaTime
            
            -- å·¦å³é£„å‹•
            local swayX = math.sin(time * 1.5 + snowData.swayOffset) * snowData.sway * 20
            local newX = currentX + swayX
            
            -- æ—‹è½‰
            flake.Rotation = flake.Rotation + snowData.spinSpeed
            
            -- è¼•å¾®æµ®å‹•
            local floatY = math.sin(time * 2 + snowData.floatPhase) * 2
            
            -- é‚Šç•Œæª¢æŸ¥
            if newY > 190 then  -- è¶…å‡ºåº•éƒ¨
                newY = -20
                newX = math.random(-20, 240)
            end
            
            if newX < -30 then  -- è¶…å‡ºå·¦é‚Š
                newX = 270
            elseif newX > 270 then  -- è¶…å‡ºå³é‚Š
                newX = -30
            end
            
            -- æ‡‰ç”¨æ–°ä½ç½®
            flake.Position = UDim2.new(0, newX, 0, newY + floatY)
            
            -- é€æ˜åº¦è®ŠåŒ– (è¼•å¾®é–ƒçˆ)
            local alpha = snowData.transparency + 0.2 * math.sin(time * 1.2 + snowData.floatPhase)
            flake.TextTransparency = alpha
        end
    end
end)

-- ========================
-- æ¨™é¡Œæ¬„
-- ========================
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
titleBar.BackgroundTransparency = 0.2
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

-- æ¨™é¡Œæ¬„åœ“è§’
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 10)
titleCorner.Parent = titleBar

-- æ¨™é¡Œæ¬„æ¼¸è®Šæ•ˆæœ
local titleGradient = Instance.new("UIGradient")
titleGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 70, 100)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(60, 90, 140)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 60, 90))
})
titleGradient.Parent = titleBar

-- æ¨™é¡Œæ–‡å­—
local titleText = Instance.new("TextLabel")
titleText.Name = "TitleText"
titleText.Size = UDim2.new(0.6, 0, 1, 0)
titleText.Position = UDim2.new(0, 15, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "â„ï¸ ç„ä¸›è…³æœ¬ ç§¦å§‹çš‡å‰µä½œ"
titleText.TextColor3 = Color3.fromRGB(200, 230, 255)
titleText.Font = Enum.Font.GothamBold
titleText.TextSize = 16
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Parent = titleBar

-- ========================
-- é—œé–‰æŒ‰éˆ•
-- ========================
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -40, 0.5, -15)
closeButton.BackgroundColor3 = Color3.fromRGB(220, 100, 100)
closeButton.BorderSizePixel = 0
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 16
closeButton.AutoButtonColor = true
closeButton.Parent = titleBar

-- é—œé–‰æŒ‰éˆ•åœ“è§’
local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = closeButton

print("âœ… æ¨™é¡Œæ¬„å·²å‰µå»º")

-- ========================
-- å‰µå»ºåŠŸèƒ½æŒ‰éˆ•å‡½æ•¸ (å†¬æ—¥é¢¨æ ¼)
-- ========================
local function createFeatureButton(parent, name, text, icon, yPosition, color)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Name = name .. "Frame"
    buttonFrame.Size = UDim2.new(1, -20, 0, 36)
    buttonFrame.Position = UDim2.new(0, 10, 0, yPosition)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(40, 50, 70)
    buttonFrame.BackgroundTransparency = 0.3
    buttonFrame.BorderSizePixel = 0
    buttonFrame.ZIndex = 2  -- ç¢ºä¿åœ¨é›ªèŠ±ä¹‹ä¸Š
    buttonFrame.Parent = parent
    
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = buttonFrame
    
    -- å†°æ™¶é‚Šæ¡†
    local frameStroke = Instance.new("UIStroke")
    frameStroke.Color = Color3.fromRGB(150, 200, 255)
    frameStroke.Thickness = 1
    frameStroke.Transparency = 0.5
    frameStroke.Parent = buttonFrame
    
    -- åœ–æ¨™
    local iconLabel = Instance.new("TextLabel")
    iconLabel.Name = name .. "Icon"
    iconLabel.Size = UDim2.new(0, 28, 1, 0)
    iconLabel.Position = UDim2.new(0, 8, 0, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = icon
    iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 18
    iconLabel.TextXAlignment = Enum.TextXAlignment.Center
    iconLabel.ZIndex = 2
    iconLabel.Parent = buttonFrame
    
    -- æŒ‰éˆ•æ–‡å­—
    local buttonText = Instance.new("TextLabel")
    buttonText.Name = name .. "Text"
    buttonText.Size = UDim2.new(0.5, 0, 1, 0)
    buttonText.Position = UDim2.new(0, 45, 0, 0)
    buttonText.BackgroundTransparency = 1
    buttonText.Text = text
    buttonText.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonText.Font = Enum.Font.Gotham
    buttonText.TextSize = 14
    buttonText.TextXAlignment = Enum.TextXAlignment.Left
    buttonText.ZIndex = 2
    buttonText.Parent = buttonFrame
    
    -- é–‹é—œæŒ‰éˆ•
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Name = name .. "Button"
    toggleBtn.Size = UDim2.new(0, 60, 0, 26)
    toggleBtn.Position = UDim2.new(1, -68, 0.5, -13)
    toggleBtn.BackgroundColor3 = Color3.fromRGB(80, 100, 140)
    toggleBtn.BorderSizePixel = 0
    toggleBtn.Text = "é—œé–‰"
    toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 12
    toggleBtn.AutoButtonColor = true
    toggleBtn.ZIndex = 2
    toggleBtn.Parent = buttonFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 6)
    btnCorner.Parent = toggleBtn
    
    return toggleBtn, buttonFrame
end

-- ========================
-- å‰µå»ºåŠŸèƒ½æŒ‰éˆ•
-- ========================
local fastAttackBtn = createFeatureButton(mainFrame, "FastAttack", "å¿«é€Ÿæ”»æ“Š", "âš¡", 50, Color3.fromRGB(0, 150, 220))
local piScriptBtn = createFeatureButton(mainFrame, "PiScript", "çš®è…³æœ¬", "ğŸ…¿ï¸", 96, Color3.fromRGB(220, 150, 50))

print("âœ… åŠŸèƒ½æŒ‰éˆ•å‰µå»ºå®Œæˆ")

-- ========================
-- ç°¡å–®é€šçŸ¥ç³»çµ±
-- ========================
local function showNotification(message, color, duration)
    duration = duration or 2
    
    local notifyGui = Instance.new("ScreenGui")
    notifyGui.Name = "SimpleNotification"
    notifyGui.Parent = playerGui
    notifyGui.DisplayOrder = 1000
    notifyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    local notifyFrame = Instance.new("Frame")
    notifyFrame.Parent = notifyGui
    notifyFrame.BackgroundColor3 = color or Color3.fromRGB(50, 150, 200)
    notifyFrame.Size = UDim2.new(0, 200, 0, 60)
    notifyFrame.Position = UDim2.new(1, -10, 0, 10)
    notifyFrame.AnchorPoint = Vector2.new(1, 0)
    
    local notifyCorner = Instance.new("UICorner")
    notifyCorner.CornerRadius = UDim.new(0, 8)
    notifyCorner.Parent = notifyFrame
    
    local notifyStroke = Instance.new("UIStroke")
    notifyStroke.Parent = notifyFrame
    notifyStroke.Color = Color3.fromRGB(255, 255, 255)
    notifyStroke.Thickness = 1.5
    
    local notifyText = Instance.new("TextLabel")
    notifyText.Parent = notifyFrame
    notifyText.BackgroundTransparency = 1
    notifyText.Size = UDim2.new(1, -16, 1, -16)
    notifyText.Position = UDim2.new(0, 8, 0, 8)
    notifyText.Text = message
    notifyText.TextColor3 = Color3.fromRGB(255, 255, 255)
    notifyText.Font = Enum.Font.GothamBold
    notifyText.TextSize = 12
    notifyText.TextWrapped = true
    
    task.wait(duration)
    
    notifyGui:Destroy()
end

-- ========================
-- å¿«é€Ÿæ”»æ“Šç³»çµ±
-- ========================
local function initializeFastAttack()
    print("âš¡ åˆå§‹åŒ–å¿«é€Ÿæ”»æ“Šç³»çµ±...")
    
    _G.FastAttack = true
    
    if _G.FastAttack then
        local function SafeWaitForChild(parent, childName)
            local success, result = pcall(function()
                return parent:WaitForChild(childName)
            end)
            if not success or not result then
                warn("ç„¡æ³•æ‰¾åˆ°: " .. childName)
            end
            return result
        end

        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")
        local Players = game:GetService("Players")
        local Player = Players.LocalPlayer

        if not Player then
            warn("æœªæ‰¾åˆ°æœ¬åœ°ç©å®¶.")
            return nil
        end

        local Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
        if not Remotes then return nil end

        local Validator = SafeWaitForChild(Remotes, "Validator")
        local CommF = SafeWaitForChild(Remotes, "CommF_")
        local CommE = SafeWaitForChild(Remotes, "CommE")

        local WorldOrigin = SafeWaitForChild(workspace, "_WorldOrigin")
        local Characters = SafeWaitForChild(workspace, "Characters")
        local Enemies = SafeWaitForChild(workspace, "Enemies")

        local Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
        local Net = SafeWaitForChild(Modules, "Net")

        local Settings = {
            AutoClick = true,
            ClickDelay = 0.000000000000000000000000001
        }

        local Module = {}

        Module.FastAttack = (function()
            if getgenv().rz_FastAttack then
                return getgenv().rz_FastAttack
            end

            local FastAttack = {
                Distance = 5000,
                attackMobs = true,
                attackPlayers = true,
                Equipped = nil
            }

            local RegisterAttack = SafeWaitForChild(Net, "RE/RegisterAttack")
            local RegisterHit = SafeWaitForChild(Net, "RE/RegisterHit")

            local function IsAlive(character)
                return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
            end

            local function ProcessEnemies(OthersEnemies, Folder)
                local BasePart = nil
                for _, Enemy in Folder:GetChildren() do
                    local Head = Enemy:FindFirstChild("Head")
                    if Head and IsAlive(Enemy) and Player:DistanceFromCharacter(Head.Position) < FastAttack.Distance then
                        if Enemy ~= Player.Character then
                            table.insert(OthersEnemies, { Enemy, Head })
                            BasePart = Head
                        end
                    end
                end
                return BasePart
            end

            function FastAttack:Attack(BasePart, OthersEnemies)
                if not BasePart or #OthersEnemies == 0 then return end
                if RegisterAttack and RegisterHit then
                    local success1 = pcall(function()
                        RegisterAttack:FireServer(Settings.ClickDelay or 0)
                    end)
                    
                    local success2 = pcall(function()
                        RegisterHit:FireServer(BasePart, OthersEnemies)
                    end)
                    
                    if not success1 or not success2 then
                        warn("å¿«é€Ÿæ”»æ“Šé ç¨‹äº‹ä»¶å¤±æ•—")
                    end
                end
            end

            function FastAttack:AttackNearest()
                local OthersEnemies = {}
                local Part1 = ProcessEnemies(OthersEnemies, Enemies)
                local Part2 = ProcessEnemies(OthersEnemies, Characters)
                if #OthersEnemies > 0 then
                    self:Attack(Part1 or Part2, OthersEnemies)
                else
                    task.wait(0)
                end
            end

            function FastAttack:BladeHits()
                local Equipped = IsAlive(Player.Character) and Player.Character:FindFirstChildOfClass("Tool")
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    self:AttackNearest()
                else
                    task.wait(0)
                end
            end

            local attackLoop
            local function startAttackLoop()
                attackLoop = task.spawn(function()
                    while task.wait(Settings.ClickDelay) do
                        if Settings.AutoClick then
                            FastAttack:BladeHits()
                        end
                    end
                end)
            end
            
            local function stopAttackLoop()
                if attackLoop then
                    task.cancel(attackLoop)
                    attackLoop = nil
                end
            end

            getgenv().rz_FastAttack = {
                FastAttack = FastAttack,
                start = startAttackLoop,
                stop = stopAttackLoop,
                Settings = Settings
            }
            
            return getgenv().rz_FastAttack
        end)()
        
        return Module.FastAttack
    end
    return nil
end

local function startFastAttack()
    print("âš¡ å•Ÿå‹•å¿«é€Ÿæ”»æ“ŠåŠŸèƒ½")
    
    if not fastAttackSystem then
        fastAttackSystem = initializeFastAttack()
    end
    
    if fastAttackSystem then
        if fastAttackSystem.start then
            fastAttackSystem.start()
        end
        return true
    else
        return false
    end
end

local function stopFastAttack()
    print("ğŸ›‘ åœæ­¢å¿«é€Ÿæ”»æ“Š")
    
    if fastAttackSystem and fastAttackSystem.stop then
        fastAttackSystem.stop()
    end
end

-- ========================
-- çš®è…³æœ¬åŠŸèƒ½ (ä¿®æ”¹ç‚ºæ‚¨è¦çš„æ ¼å¼)
-- ========================
local function executePiScript()
    print("ğŸ…¿ï¸ æ­£åœ¨å˜—è©¦åŸ·è¡Œçš®è…³æœ¬...")
    
    showNotification("ğŸ…¿ï¸ æ­£åœ¨åŠ è¼‰çš®è…³æœ¬...", Color3.fromRGB(255, 165, 0), 2)
    
    task.wait(1)
    
    -- é€™å°±æ˜¯æ‚¨è¦çš„ loadstring(game:HttpGet(...))() æ ¼å¼
    local success, err = pcall(function()
        -- ç›´æ¥åŸ·è¡Œé ç¨‹ä»£ç¢¼
        return loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
    end)
    
    if success then
        print("âœ… çš®è…³æœ¬åŸ·è¡ŒæˆåŠŸ")
        showNotification("âœ… çš®è…³æœ¬åŠ è¼‰å®Œæˆ", Color3.fromRGB(0, 180, 0), 3)
        return true
    else
        print("âŒ çš®è…³æœ¬åŸ·è¡Œå¤±æ•—: " .. tostring(err))
        showNotification("âŒ åŠ è¼‰å¤±æ•—: " .. tostring(err), Color3.fromRGB(255, 0, 0), 3)
        return false
    end
end

-- ========================
-- é—œé–‰UIåŠŸèƒ½
-- ========================
local function closeUI()
    showNotification("ğŸ›‘ æ­£åœ¨é—œé–‰è…³æœ¬...", Color3.fromRGB(220, 60, 60), 1)
    
    -- åœæ­¢é›ªèŠ±å‹•ç•«
    if snowAnimation then
        snowAnimation:Disconnect()
    end
    
    if isFastAttackOn then
        stopFastAttack()
        isFastAttackOn = false
    end
    
    task.wait(0.5)
    
    if screenGui and screenGui.Parent then
        screenGui:Destroy()
        
        _G.XuanCongUILoaded = false
        _G.XuanCongUIInstance = nil
        
        showNotification("âœ… è…³æœ¬å·²é—œé–‰", Color3.fromRGB(0, 180, 0), 2)
    end
end

closeButton.MouseButton1Click:Connect(closeUI)
closeButton.TouchTap:Connect(closeUI)

-- ========================
-- åŠŸèƒ½æŒ‰éˆ•äº‹ä»¶
-- ========================
-- å¿«é€Ÿæ”»æ“ŠæŒ‰éˆ•
fastAttackBtn.MouseButton1Click:Connect(function()
    isFastAttackOn = not isFastAttackOn
    
    if isFastAttackOn then
        fastAttackBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
        fastAttackBtn.Text = "é–‹å•Ÿ"
        
        -- æ”»æ“Šæ™‚æ·»åŠ ç‰¹æ•ˆé›ªèŠ±
        for i = 1, 3 do
            local snowType = snowTypes[math.random(1, #snowTypes)]
            local snowflake = Instance.new("TextLabel")
            snowflake.Size = UDim2.new(0, snowType.size, 0, snowType.size)
            snowflake.Position = UDim2.new(0, math.random(0, 220), 0, -20)
            snowflake.BackgroundTransparency = 1
            snowflake.Text = snowType.symbol
            snowflake.TextColor3 = Color3.fromRGB(100, 200, 255)
            snowflake.Font = Enum.Font.SourceSansBold
            snowflake.TextSize = snowType.size - 4
            snowflake.ZIndex = 0
            snowflake.Parent = mainFrame
            
            table.insert(snowflakes, {
                object = snowflake,
                speed = snowType.speed * (1.2 + math.random() * 0.3),
                sway = snowType.sway * (0.8 + math.random() * 0.5),
                spinSpeed = snowType.spin * (0.8 + math.random()),
                swayOffset = math.random() * math.pi * 2,
                floatPhase = math.random() * math.pi * 2,
                transparency = 0.3 + math.random() * 0.3
            })
        end
        
        local success = startFastAttack()
        if success then
            showNotification("âš¡ å¿«é€Ÿæ”»æ“Šå·²é–‹å•Ÿ", Color3.fromRGB(0, 180, 0), 2)
        else
            showNotification("âŒ å¿«é€Ÿæ”»æ“Šåˆå§‹åŒ–å¤±æ•—", Color3.fromRGB(180, 0, 0), 2)
            fastAttackBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
            fastAttackBtn.Text = "é—œé–‰"
            isFastAttackOn = false
        end
    else
        fastAttackBtn.BackgroundColor3 = Color3.fromRGB(80, 100, 140)
        fastAttackBtn.Text = "é—œé–‰"
        stopFastAttack()
        showNotification("ğŸ›‘ å¿«é€Ÿæ”»æ“Šå·²é—œé–‰", Color3.fromRGB(180, 0, 0), 2)
    end
end)

-- çš®è…³æœ¬æŒ‰éˆ•
piScriptBtn.MouseButton1Click:Connect(function()
    isPiScriptOn = not isPiScriptOn
    
    if isPiScriptOn then
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
        piScriptBtn.Text = "é–‹å•Ÿ"
        
        -- ç›´æ¥åŸ·è¡Œ loadstring(game:HttpGet(...))()
        local success = executePiScript()
        
        if success then
            piScriptBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            piScriptBtn.Text = "å·²åŠ è¼‰"
        else
            piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
            piScriptBtn.Text = "å¤±æ•—"
            isPiScriptOn = false
            
            task.wait(3)
            piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 150, 50)
            piScriptBtn.Text = "é—œé–‰"
        end
    else
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 150, 50)
        piScriptBtn.Text = "é—œé–‰"
        showNotification("ğŸ…¿ï¸ çš®è…³æœ¬å·²é—œé–‰", Color3.fromRGB(180, 0, 0), 2)
    end
end)

-- ========================
-- æ‹–ç§»åŠŸèƒ½
-- ========================
local dragging = false
local dragStart = nil
local startPos = nil

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

inputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

inputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- ========================
-- ç·Šæ€¥é—œé–‰åŠŸèƒ½ï¼ˆæŒ‰ESCéµï¼‰
-- ========================
inputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.Escape then
        closeUI()
    end
end)

-- ========================
-- éš¨æ©Ÿæ·»åŠ é›ªèŠ±
-- ========================
task.spawn(function()
    while task.wait(math.random(2, 4)) do
        if #snowflakes < 20 then
            local snowType = snowTypes[math.random(1, #snowTypes)]
            local snowflake = Instance.new("TextLabel")
            snowflake.Size = UDim2.new(0, snowType.size, 0, snowType.size)
            snowflake.Position = UDim2.new(0, math.random(-20, 240), 0, -20)
            snowflake.BackgroundTransparency = 1
            snowflake.Text = snowType.symbol
            snowflake.TextColor3 = Color3.fromRGB(180, 220, 255)
            snowflake.Font = Enum.Font.SourceSansBold
            snowflake.TextSize = snowType.size - 4
            snowflake.ZIndex = 0
            snowflake.Parent = mainFrame
            
            table.insert(snowflakes, {
                object = snowflake,
                speed = snowType.speed * (0.8 + math.random() * 0.4),
                sway = snowType.sway * (0.5 + math.random() * 1),
                spinSpeed = snowType.spin * (0.5 + math.random()),
                swayOffset = math.random() * math.pi * 2,
                floatPhase = math.random() * math.pi * 2,
                transparency = 0.4 + math.random() * 0.4
            })
        end
    end
end)

-- ========================
-- åˆå§‹åŒ–å®Œæˆ
-- ========================
task.wait(0.5)
showNotification("âœ… ç„ä¸›è…³æœ¬ v3.1 å·²åŠ è¼‰", Color3.fromRGB(50, 150, 200), 3)

print("ğŸ® =================================")
print("ğŸ® ç„ä¸›è…³æœ¬ -ç§¦å§‹çš‡å‰µä½œ")
print("ğŸ® åŠŸèƒ½ï¼šå¿«é€Ÿæ”»æ“Š + çš®è…³æœ¬ + é›ªèŠ±å‹•ç•«")
print("ğŸ® 12ç‰‡é›ªèŠ±æ­£åœ¨é£„è½ä¸­...")
print("ğŸ® çš®è…³æœ¬ä½¿ç”¨ loadstring(game:HttpGet(...))() æ ¼å¼")
print("ğŸ® UIå°‡å§‹çµ‚é¡¯ç¤ºï¼Œç„¡æ³•éš±è—")
print("ğŸ® æŒ‰ESCéµå¯é—œé–‰")
print("ğŸ® =================================")
