_G.FastAttackEnabled = true

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Player = Players.LocalPlayer

local Enemies = workspace:WaitForChild("Enemies")
local Characters = workspace:WaitForChild("Characters")

local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegisterAttack = Net:WaitForChild("RE/RegisterAttack")
local RegisterHit = Net:WaitForChild("RE/RegisterHit")

-- ====== åƒæ•¸ ======
local DETECT_RANGE = 1000       -- åµæ¸¬ç¯„åœï¼Œ500/880/1000 Stud éƒ½å¯è¨­å®š
local USE_HRP = true
local ATTACK_CD = 0             -- æ¯å¹€æ”»æ“Š

-- ====== å·¥å…·å‡½æ•¸ ======
local function Alive(char)
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    return hum and hum.Health > 0
end

local function GetPart(enemy)
    return enemy:FindFirstChild("HumanoidRootPart") or enemy:FindFirstChild("Head")
end

-- ====== æ”¶é›†ç›®æ¨™ ======
local function CollectTargets()
    local targets = {}
    local basePart = nil
    local myRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if not myRoot then return nil, targets end

    local function ProcessFolder(folder)
        for _, enemy in ipairs(folder:GetChildren()) do
            if enemy ~= Player.Character and Alive(enemy) then
                local part = GetPart(enemy)
                if part and (part.Position - myRoot.Position).Magnitude <= DETECT_RANGE then
                    targets[#targets+1] = {enemy, part}
                    basePart = basePart or part
                end
            end
        end
    end

    ProcessFolder(Enemies)
    ProcessFolder(Characters)

    return basePart, targets
end

-- ====== æ¯å¹€æ”»æ“Š ======
RunService.Heartbeat:Connect(function()
    if not _G.FastAttackEnabled then return end
    local basePart, targets = CollectTargets()
    if basePart and #targets > 0 then
        RegisterAttack:FireServer(0)
        RegisterHit:FireServer(basePart, targets)
    end
end)

print("ğŸš€ å¿«é€Ÿæ”»æ“Š + æ“´å¤§åµæ¸¬ç¯„åœå·²å•Ÿå‹•ï¼Œåµæ¸¬ç¯„åœï¼š"..DETECT_RANGE.." Stud")
